<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
</head>
<body>
<!--/*
    Template params:
        tableName ... Used in column name message `admin.table.<tableName>.<columnName>'
        tableSlice ... TableSlice object.
        detailUrl ... Detail endpoint URL to which detail ID will be appended.
*/-->
<table class="table table-striped table-cells-bordered table-hover dataTable"
       th:with="urlBuilder=${T(org.springframework.web.servlet.support.ServletUriComponentsBuilder)}">
    <thead>
    <tr>
        <th th:object="${tableSlice.getIdColumn()}"
            th:with="direction=*{order} ? (*{order.direction.isAscending()} ? 'asc' : 'desc') : null"
            th:class="${direction} ? ('sorting_' + ${direction}) : 'sorting'">
            <a th:with="sortValue=*{name} + (${direction} and ${direction} == 'asc' ? ';desc' : '')"
               th:href="${urlBuilder.fromCurrentRequest().replaceQueryParam('sort', '__${sortValue}__').replaceQueryParam('offset').toUriString()}">#</a>
        </th>
        <th th:each="column : ${tableSlice.getColumns()}"
            th:object="${column}"
            th:class="*{order} ? (*{order.direction.isAscending()} ? 'sorting_asc' : 'sorting_desc') : 'sorting'">
            <a th:with="sortValue=*{name} + (*{order} and *{order.direction.isAscending()} ? ';desc' : '')"
               th:href="${urlBuilder.fromCurrentRequest().replaceQueryParam('sort', '__${sortValue}__').replaceQueryParam('offset').build()}"
               th:assert="${tableName}"
               th:text="#{|admin.table.${tableName}.*{name}|}">Column name</a>
        </th>
    </tr>
    </thead>
    <tbody th:remove="all-but-first">
    <tr th:each="row : ${tableSlice}">
        <td class="id-data-cell">
            <a th:assert="${detailUrl}"
               th:href="@{|${detailUrl}${row['id']}|}"
               th:text="${row['id']}">id</a>
        </td>
        <td th:each="column : ${tableSlice.getColumns()}">
            <span th:if="${column.type != T(cz.quantumleap.core.persistence.transport.Lookup)}"
                  th:text="${{row['__${column.name}__']}}"
                  th:remove="tag">Standard value</span>
            <!-- TODO this solution is not solid... -->
            <a th:if="${column.type == T(cz.quantumleap.core.persistence.transport.Lookup)}"
               th:href="|${row['__${column.name}__'].tableName}/${row['__${column.name}__'].id}|"
               th:text="${{row['__${column.name}__'].label}}">Lookup value</a>
        </td>
    </tr>
    <tr>
        <td th:colspan="${1 + tableSlice.getColumns().size()}" th:text="#{admin.table.empty}">
            No data found!
        </td>
    </tr>
    </tbody>
    <tfoot>
    <tr>
        <td class="text-center" th:colspan="${1 + tableSlice.getColumns().size()}">
            <a th:if="${tableSlice.canExtend()}"
               th:href="${urlBuilder.fromCurrentRequest().replaceQueryParam('size', '__${tableSlice.extend().size}__').build()}"
               class="btn btn-outline btn-default btn-xs btn-load-more">Load more</a>
        </td>
    </tr>
    </tfoot>
</table>
</body>
</html>